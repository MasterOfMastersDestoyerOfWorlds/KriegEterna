<section class="gradient even-gradient">
    <div class="css-0ErxL css-0vG6H css-kEe4h">
    <div class="css-pjOS5 css-P-g66 css-EiWA- css-ysAew">

        {{$title := (index .Params "title")}}

        {{$data := 0}}
        {{ range $i, $r := getCSV "\t" "data/CardSheet.tsv" }}
        {{ $c := (index . 0) }}
        {{ if eq $c $title }}
        {{$data = .}}
        {{end}}
        {{ end }}

        {{$type := (index $data 4)}}
        {{$typedesc := $type}}
        {{$cardback := "Flag"}}

        {{ if eq $type "Ranged" }}
        {{$typedesc = "Ranged Unit"}}
        {{end}}

        {{ if eq $type "Melee" }}
        {{$typedesc = "Melee Unit"}}
        {{end}}

        {{ if eq $type "Siege" }}
        {{$typedesc = "Siege Unit"}}
        {{end}}

        {{ if eq $type "Power" }}
        {{$typedesc = "Hex Power"}}
        {{$cardback = "FlagPower"}}
        {{end}}

        {{ if eq $type "Decoy" }}
        {{$typedesc = "Jester Power"}}
        {{$cardback = "FlagPower"}}
        {{end}}

        {{ if eq $type "Spy" }}
        {{$typedesc = "Spy Power"}}
        {{$cardback = "FlagPower"}}
        {{end}}

        {{ if eq $type "Weather" }}
        {{$typedesc = "Weather Power"}}
        {{$cardback = "FlagPower"}}
        {{end}}

        {{ if eq $type "King" }}
        {{$cardback = "FlagKing"}}
        {{end}}

        {{partial "cardflip" (dict "Params" (dict "front" $title "back" $cardback "big" "true" "disallowScale" "mobile"))}}

        <h3 class="card-detail-title {{lower (index $data 4)}}">{{(index $data 1)}}</h3>

        <!-- taglist -->
        {{ partial "taglist.html" .Page }}

        <!-- strength -->
        {{$strength := (index $data 5)}}
        {{if gt (len $strength) 0}}
        <p class="rule-paragraph">
            <span class="rule-word">Strength:</span> {{$strength}}
        </p>
        {{end}}

        <!-- type -->
        <p class="rule-paragraph">
            <span class="rule-word">Type:</span> {{$typedesc}}
        </p>

        <!-- effect -->
        {{$effect := (index $data 2)}}
        {{$effect = (replace $effect "^" "")}}
        {{$effect = (replace $effect "\\`" "\"")}}
        {{$effect = (replace $effect "\\r" " ")}}
        {{if gt (len $effect) 1}}
        <p class="rule-paragraph">
            <span class="rule-word">Effect Text:</span> {{$effect}}
        </p>
        {{end}}

        <!-- flavor -->
        {{$flavor := (index $data 3)}}
        {{$flavor = (replace $flavor "^" "")}}
        {{$flavor = (replace $flavor "\\`" "\"")}}
        {{$flavor = (replace $flavor "\\r" " ")}}
        <p class="rule-paragraph">
            <span class="rule-word">Flavor Text:</span> {{$flavor}}
        </p>

        <!-- artwork -->
        {{if (isset .Params "artwork")}}
        <p class="rule-paragraph">
            <span class="rule-word">Artwork:</span> {{.Params.artwork}}
        </p>
        {{end}}

        <!-- strategy -->
        {{$stratDesc := (index $data 6)}}
        {{$stratDesc := (lower $stratDesc)}}
        {{if gt (len $stratDesc) 1}}
        <p class="rule-paragraph">
            <span class="rule-word">Strategy:</span> {{partial (printf "strategy-descriptions/%s.html" $stratDesc) .}}
        </p>
        {{end}}

        <!-- about -->
        {{ with .Inner }}
            <p class="rule-paragraph" style="margin-bottom: 0">
                <span class="rule-word">About the card:</span>
            </p>
            {{ . }}
        {{ else }}
            <!-- nothing -->
        {{ end }}

        </br>
        {{ partial "nextprev.html" .Page }}
    </div>
    </div>
</section>